define("wktrade:widget/ui/mvp/model/model.js",function(e,i,a){var t=e("wkcommon:widget/ui/lib/jquery/jquery.js"),r=e("wktrade:widget/ui/mvp/event/event.js"),o=e("wkcommon:widget/ui/js_core/mvp/template/template.js"),c=function(){var e=function(){this.init.apply(this)},i=location.protocol+"//"+location.host+"/cashier/interface/maketrade";return e.prototype={name:"",URL:function(){var e=window.location.host;return"wenku.baidu.com"===e||"t.wenku.baidu.com"===e||"yf-iknow-heter00.yf01.baidu.com:8083"===e||"cq02-iknow-tips00.cq02.baidu.com:8099"===e||"cq01-orp-app0402.cq01.baidu.com:8300"===e?{walletUrl:"//zhifu.baidu.com/static/js/pc/iframe/lbscashier-iframe.js",checkOrder:i}:{walletUrl:["http://10.94.63.37:8480","/static/js/pc/iframe/lbscashier-iframe.js"].join(""),checkOrder:i}}(),PD:{cashierCode:0,token:"",isFirst:!0,uid:0,uname:"",goodsId:0,goodsName:"",goodsType:0,movieType:"",discount:0,range:"",renewInfo:"",specialInfo:"",salePrice:0,actualPrice:0,savePrice:0,price:0,otherPrice:0,docPrice:0,docSalePrice:0,totalNum:1,vouchersPrice:0,yuedubookPrice:0,isVouchers:!1,hasBook:!1,isVoucherId:0,isBookId:0,vouchers:[],isExchange:!1,isOtherPrice:!1,isAgreement:!0,isDocPack:!1,isGiftCard:!1,initCashierUrl:"",goodsInfo:{},cashierName:"",isWenkuVip:0,isVipBookObj:{},newuser:0},cashierInitUrl:function(e){var i=this;return["orderCreateTime=",function(){var e=["uid="+i.PD.uid+"|","goods_id="+i.PD.goodsId+"|","goods_type="+i.PD.goodsType+"|","original_price="+i.PD.price+"|","token="+i.PD.token+"|","cashierCode="+i.PD.cashierCode+"|","small_flow="+i.PD.isHit+"|",i.PD.isVouchers?"voucher_id="+i.PD.isVoucherId+"|":"|",i.PD.hasBook?"book_ids="+i.PD.isBookId+"|":"|",i.PD.referDocId?"referDocId="+i.PD.referDocId+"|":"|",i.PD.newuser?"new_user="+i.PD.newuser+"|":"|",i.PD.tradeId?"trade_id="+i.PD.tradeId+"|":"|",i.PD.docIds?"doc_ids="+i.PD.docIds+"|":"|",i.PD.isExchange?"discount_code="+i.PD.exchangeCode+"|":"|",i.PD.docIds?"doc_ids="+i.PD.docIds+"|":"|",i.PD.isGiftCard?"egift_card_cnt="+i.PD.totalNum+"|":"|",i.PD.selectMonthlyPay?"tn=STN@bfb_auth|":"|",i.PD.userAddressId?"uaddid="+i.PD.userAddressId+"|":"|",i.PD.movieType?"movie_type="+i.PD.movieType+"|":"|","uname="+encodeURIComponent(i.PD.uname)+"|","goods_name="+encodeURIComponent(i.PD.goodsName)+"|"];return e=e.join(""),e+"&"}(),"payAmount="+(e&&e.payAmount?e.payAmount:i.PD.actualPrice)+"&",i.getReqData()?"reqData="+i.getReqData()+"&":"","feData="+i.getFeData()].join("")},getFeData:function(){var e=this,i={disabledChannel:[]};e.PD.isWechat?i.disabledChannel.push("contract","bfb","alipay","bank","mobile","game"):(e.PD.selectMonthlyPay?(i.disabledChannel.push("bfb","alipay","wechat","bank","mobile","game"),i.channelView={contract:1}):3===+e.PD.goodsType&&10===+e.PD.goodsId||+this.PD.contractType?i.disabledChannel.push("contract"):"giftcardscashier"===e.PD.cashierName||"vippackagecashier"===e.PD.cashierName||"provippackagecashier"===e.PD.cashierName||"doccashier"===e.PD.cashierName||"giftcardsgototrade"===e.PD.cashierName||"vippkgototrade"===e.PD.cashierName?i.disabledChannel.push("contract"):i.channelView={contract:0},("gototrade"===e.PD.cashierName||"giftcardsgototrade"===e.PD.cashierName||"vippkgototrade"===e.PD.cashierName||"docpackgototrade"===e.PD.cashierName)&&i.disabledChannel.push("wechat"));var a=JSON.stringify(i);return a},getReqData:function(){var e="",i=this;return i.PD.isWechat||(e='{"wechat_mode": "button"}'),e},cashier:{obj:null,key:!1},M:new r,init:function(){},updateTpl:function(e,i,a){var t=e.find('[node-type="ajax-tpl"]').html();i.sale_price_txt=this.formatPrice(i.sale_price),i.price_txt=this.formatPrice(i.price),i.prosmallflow=a,i.single_price&&(i.single_price_txt=this.formatPrice(i.single_price)),i.single_sale_price&&(i.single_sale_price_txt=this.formatPrice(i.single_sale_price)),e.find('[node-type="ajax-html"]').html(o.template(t,i))},formatPrice:function(e,i){var i=i||(Number(e)%100===0?0:1);return(Number(e)/100).toFixed(i)},objIsNull:function(e){for(var i in e)if(e.hasOwnProperty(i))return!0;return!1},refreshElements:function(e,i){var a,r=e||this.elements,o=i||this.$el,c=[];for(var s in r)r.hasOwnProperty(s)&&(a=r[s],c.push(this.E[a]=t(s,o)));return c}},e}(),s=function(e){var i=function(){};return i.prototype=t.extend(new c,e),new i};a.exports.model=c,a.exports.create=s});