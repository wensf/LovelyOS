define("wkview:widget/top_ads_banner/top_ads_banner.js",function(t,n,i){var a=t("wkcommon:widget/ui/js_core/xform/xform.js"),e=t("wkcommon:widget/lib/doT/doT.min.js"),s=(t("wkcommon:widget/ui/js_core/login/login.js"),t("wkcommon:widget/lib/fis/data/data.js")),o='<a href="javascript:;" class="top-ads-container top-ads-banner-goto-cashier log-xsend" data-logxsend="[1, 100017]" data-href="{{=it.jumpUrl}}">\n<p class="left-image" style="background: url({{=it.imgUrl}}) no-repeat;"></p>\n<div class="right-info">\n<p class="right-first-para">{{=it[\'first-para\']}}</p>\n<p class="right-second-para">{{=it[\'second-para\']}}</p>\n</div>\n</a>\n',r=function(t){this.$el=$(".top-ads-banner-wrap"),this.crumbs=t.crumbs||"",this.categoryList=this.crumbs.split(","),this.categoryTpl=e.template(o),this.init()};r.prototype={init:function(){this.getDataList(),this.bindEvent()},getDataList:function(){var t=this;a.getJSON("top_ads_banner",{success:function(n){if(n&&n.matchDataList&&n.matchDataList.length>0){var i=n.matchDataList,a=t.indexOfTarget(i);-1!==a&&a<i.length&&t.$el.html(t.categoryTpl(i[a]))}}}).always(function(){t.$el.removeClass("hide")})},indexOfTarget:function(t){for(var n=-1,i=this.categoryList.length-1;i>=0;i--)for(var a=0;a<t.length;a++)if(t[a].keyword===this.categoryList[i])return a;return n},bindEvent:function(){var t=s.get("WkInfo")||{},n=t.DocInfo||{},i=n.docId||0;this.$el.on("click",function(){var t=$(this).find(".top-ads-banner-goto-cashier"),n=t.attr("data-href")+i;T.lang.eventCenter.addEventListener("Login.Success",function(t){T.event.stop(t),window.location.href=n}),window.location.href=n})}},i.exports=r});