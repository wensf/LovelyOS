define("wkview:widget/common_toc/reader_html/page_body/main.js",function(e,i,t){e("wkcommon:widget/ui/lib/async_widget/async_widget.js");var n=e("wkcommon:widget/ui/lib/browser/browser.js"),o=e("wkview:widget/crmAd/crmAd2.js"),d=e("wkview:widget/crm_multi/crm_multi.js"),w=e("wkview:widget/ui/detectImgBlock/detectImgBlock.js"),r=e("wkview:widget/ui/detectImgBlock/hijack.js"),c=e("wkcommon:widget/ui/lib/BigPipe/BigPipe.js"),s=e("wkview:widget/crmAd/crmAd3.js"),g=e("wkview:widget/fengchao_right/fengchao_right.js"),a=e("wkcommon:widget/lib/tangram/base/base.js"),l=e("wkcommon:widget/ui/lib/jquery/jquery.js"),h=function(e){l.extend(!0,this.ops,e),this.bindEvent().run()};h.prototype={constructor:h,ops:{docId:"",docTitle:"",flag:1,needShowAd:1,needShowAd2:1},bindEvent:function(){var e=function(){var e=l(".daily-recom-wrap"),i=l(".reader-container").width();e.css("width",i),900>i?e.addClass("small-wrap"):e.removeClass("small-wrap")};return e(),a.lang.eventCenter.addEventListener("Reader.zoomChange",e),this},run:function(){var e=this.ops;if(l(function(){l(".async-widget").widgetAsync({effect:n.ie&&n.ie<8?"show":"slideDown",effect_speed:!1})}),!e.flag)return this;var i=w.detectImgBlock(),t=[];t.push({url:"/browse/widget/viewrecom?pagelets[]=view-like-recom&doc_id="+e.docId,id:"view-like-recom"});var a=function(){this.next=function(){if(t.length){var n=t.shift();c.fetch(n.url,n.id)}else l.event.trigger("orgRightRecon"),l.event.trigger("rightDocLoadEnd");if(e.needShowAd&&l.when(i).then(l(".other-like-doc").height()>10?function(){new s({ele:l("#guess-like-doc"),pid:7})}:function(){g.init()}),new r,e.needShowAd2){var w=new d({title:e.docTitle}),a=function(){new o({ele:l("#wkad18"),pid:18}),new o({ele:l("#wkad21"),pid:21});var e=Math.random();w.show2To3(function(){new s({ele:l("#wkad21-2"),pid:5})},e),navigator.userAgent.indexOf("MSIE 6.0")<0&&(new Date).getTime()>+new Date("2015-04-02 00:00:00")&&w.showDocBtm(function(){new o({ele:l("#wkgg"),pid:3})},e),l("#html-reader-AD-4t5").length>0&&w.show4To5(e),new s({ele:l("#ggbtm"),pid:2})};l.when(i).then(function(){a()})}}},h=new a;if(c.on("pagerendercomplete",h.next,this),t.length){var m=t.shift();c.fetch(m.url,m.id)}return this}},t.exports=h});