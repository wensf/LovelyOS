define("wkview:widget/ui/html_view/ppt/control.js",function(t,e,i){var n=t("wkview:widget/ui/html_view/widget.js").widget,o=t("wkview:widget/ui/html_view/preloadImg.js").preloadImg,s=t("wkcommon:widget/lib/fis/data/data.js"),r=t("wkview:widget/ui/view/pay_org_vip/pay_org_vip.js"),h=t("wkcommon:widget/ui/js_core/log/log.js"),c=n({Options:{countPn:1},elements:{"@content":"$content","@arrow-left":"$arrowLeft","@arrow-right":"$arrowRight","@loading":"$loading","@go-to-trade":"$goToTrade","@flash-pay-btn":"$flashPayBtn"},events:{"$arrowRight click":"next","$arrowLeft click":"prev","$flashPayBtn click":"goPay"},_init:function(){this.currentPn=1,this.firstRender=!0,this.lock=!1,this.secondClassify=s.get("WkInfo").DocInfo.cid3||""},_initEvents:function(){var t=this;t.on("onsetContentAfter",function(){t.firstRender&&t.fire("firstRender"),t.firstRender=!1,t.lock=!1,h.xsend(1,101267,{pn:t.currentPn,total:t.options.countPn})})},next:function(){return h.xsend(1,100037,{secondClassify:this.secondClassify,pn:this.currentPn,out:0}),this.currentPn>=this.options.freeNum?(this.fire("goToTrade"),!1):this.currentPn>=this.options.countPn||this.lock?!1:(this.currentPn++,void this.fire("next",this.currentPn))},prev:function(){return this.currentPn<=1||this.lock?!1:void(this.options.trade?this.fire("closeTrade"):(this.currentPn--,this.fire("prev",this.currentPn)))},goPay:function(){var t=r({goods_type:1,goods_id:s.get("WkInfo").DocInfo.docId||0});t.init({query:{fr:"html_view",q:"paybtn_page",pn:s.get("WkInfo").DocInfo.totalPageNum||0,click_type:"13011002",dqStatCode:"31_8_32_33"}})},_getContentImg:function(){var t=this.$elements.$img;return t&&t.length>0?t:(t=$(this.$elements.$content.find("img")),t.length<1&&(t=$("<img />"),t.appendTo(this.$elements.$content)),this.$elements.$img=t,t)},setContent:function(t){var e=this,i=this._getContentImg(),n=e.$elements.$loading;e.lock=!0,e.timeLock="",o({src:t,onload:function(o){e.firstRender&&(e._setImgSize(o),e.options.el.show()),clearTimeout(e.timeLock),i.attr("src",t),e.fire("setContentAfter"),i.css("opacity",1),n.hide()},loading:function(){e.firstRender||(i.css("opacity",0),e.timeLock=setTimeout(function(){n.show()},200))}})},_setImgSize:function(t){var e=this,i=0,n=0,o=0;e.options.isFullSize?(o=e.options.height/t.height,i=t.width*o,e.options.width=i,n=e.options.height):(i=t.width>=1080?e.options.width=932:e.options.width,o=e.options.width/t.width,n=t.height*o,e.options.height=n),e.scale=o,e.resize(i,n)},resize:function(t,e){var i=this._getContentImg();i.width(t).height(e),this.$elements.$arrowLeft.height(e),this.$elements.$arrowRight.height(e)},getCurrentPage:function(){return this.currentPn},setCurrentPage:function(t){return t>this.options.countPn||1>t||this.lock?!1:void(this.currentPn=t)},goToTrade:function(){var t=this.$elements.$goToTrade,e=this._getContentImg();e.css("opacity",0),t.show(),this.options.trade=!0},closeTrade:function(){if(this.options.trade){var t=this.$elements.$goToTrade,e=this._getContentImg();e.css("opacity",1),t.hide(),this.options.trade=!1}}},{type:"PPT_CONTROL"});i.exports.Control=c});
;define("wkview:widget/ui/html_view/ppt/data.js",function(e,i,t){var a=e("wkcommon:widget/ui/lib/jquery/jquery.js"),_=e("wkcommon:widget/ui/lib/lang/lang.js"),n="//wenku.baidu.com",c="/browse/getbcsurl?doc_id=__DOC_ID__&pn=1&rn=__RN__&type=ppt&callback=?",l=_.createClass(function(e){this.id=e,this.cache=null}).extend({getData:function(){var e=this;return e.api=c.replace(/__DOC_ID__/g,e.id).replace(/__RN__/g,99999),a.getJSON(n+e.api)}});t.exports.Data=l});
;define("wkview:widget/ui/html_view/ppt/ppt.js",function(t,e,o){var n=t("wkview:widget/ui/html_view/widget.js").widget,i=t("wkview:widget/ui/html_view/ppt/control.js").Control,a=t("wkview:widget/ui/html_view/ppt/data.js").Data,s=t("wkview:widget/ui/html_view/preloadImg.js").preloadImg,r=t("wkview:widget/ui/html_view/dep/string/string.js"),d=t("wkcommon:widget/lib/fis/data/data.js"),l=t("wkview:widget/html_view/html_reader/js/toolsBarPpt.js").toolsBar,p=t("wkview:widget/html_view/html_reader/js/pptFullScreen.js").fullScreen,c=t("wkview:widget/html_view/html_reader/js/zoom.js").zoom,w=t("wkview:widget/html_view/html_reader/js/share.js").share,u=t("wkview:widget/html_view/html_reader/js/appraise.js").appraise,v=t("wkview:widget/html_view/html_reader/js/favo.js").favo,h=t("wkview:widget/html_view/html_reader/js/bookmark.js").bookmark,m=n({Options:{id:null,width:750,height:null,isFullSize:!1},_init:function(){$(".body").addClass("ppt-body");var t=this;t.tmpl='<div class="mod ppt-mod">\n    <div js-hook="content" class="bd ppt-bd"></div>\n    <div js-hook="loading" class="loading"></div>\n    <div js-hook="go-to-trade" class="go-to-trade">\n        #{downloadText}\n        <p class="price">&#65509;#{payPrice}\u5143</p>\n        <div>\n            #{payInsert}\n            <a href="###" js-hook="flash-pay-btn" class="flash-pay-btn #{btnType}">\n                <b class="ui-bz-btn-p-16 ui-bz-btc">\u8d2d\u4e70</b>\n            </a>\n        </div>\n    </div>\n    <div onselectstart="return false;" js-hook="arrow-left" class="ppt-arrow-left">\n        &nbsp;&nbsp;\n    </div>\n    <div onselectstart="return false;" js-hook="arrow-right" class="ppt-arrow-right">\n        &nbsp;&nbsp;\n    </div>\n</div>';var e='<a href="/cashier/browse/vipwithdoccashier?doc_ids=[&quot;__DOCID__&quot;]&amp;dqStatCode=31_35_36" class="ui-bz-btn"><b class="ui-bz-btn-p-16 ui-bz-btc">\u8d2d\u4f1a\u5458\u672c\u6587\u514d\u8d39</b></a>',o=d.get("WkInfo").DocInfo,n=0,i='<p class="tip">\u8bd5\u8bfb\u5df2\u7ecf\u7ed3\u675f\uff0c\u5982\u679c\u9700\u8981\u7ee7\u7eed\u9605\u8bfb\uff0c\u656c\u8bf7\u8d2d\u4e70</p>';n=o.vip_type&&o.is_discount_doc?~~o.vip_price/100:t.options.payprice,o.isdownloaded&&0!==+o.isdownloaded&&(i='<p class="tip">\u8bd5\u8bfb\u5df2\u7ecf\u7ed3\u675f\uff0c\u5982\u679c\u9700\u8981\u7ee7\u7eed\u9605\u8bfb\u6216\u4e0b\u8f7d\uff0c\u656c\u8bf7\u8d2d\u4e70</p>'),1!==o.ispaied&&o.isPaymentDoc&&(!o.vip_type||0===o.vip_type)&&0===o.edu_vip_type&&o.payPrice<=500?(e=e.replace("__DOCID__",o.docId),t.tmpl=r.format(t.tmpl,{payPrice:n,payInsert:e,btnType:"ui-bz-btn-senior",downloadText:i})):t.tmpl=r.format(t.tmpl,{payPrice:n,payInsert:"",btnType:"ui-bz-btn",downloadText:i}),t.toolsBar=new l({readerContainer:t,reader:t.reader,items:t.getToolsBarItems()}),t.data=new a(t.options.id),t.dataCache=null,t.fire("onload")},_initEvents:function(){var t=this;i.prototype._initEvents.call(t),t.data.on("error",function(){console.error("\u6570\u636e\u8bf7\u6c42\u9519\u8bef")}),t.on("onload",function(){t._getData()}),t.on("next",function(){var e=t.currentPn;t.setContent(t.dataCache[e-1].zoom)}),t.on("prev",function(){var e=t.currentPn;t.setContent(t.dataCache[e-1].zoom)}),t.on("getDataAfter",function(){t.setContent(t.dataCache[0].zoom)}),t.on("ondispose",function(){t.data.dispose()}),t.on("setContentAfter",function(){var e=t.currentPn;return e>=t.options.countPn?!1:void t._preload(t.dataCache[e].zoom)}),t.on("goToTrade",function(){t.goToTrade()}),t.on("closeTrade",function(){t.closeTrade()})},_render:function(){this.$el.html(this.tmpl)},_getData:function(){var t=this;t.data.getData().done(function(e){e.count&&(t.dataCache=e.list,t.options.countPn=e.count,e.free=~~e.free,e.count=~~e.count,t.options.freeNum=e.ispay?e.free:e.free+1),t.fire("getDataAfter",e)})},_preload:function(t){s({src:t})},getToolsBarItems:function(){var t=this,e=[p,c,h,v,function(){return t.isPrivate?null:w}(),u];return e},getDataLength:function(){return this.dataCache.length},gotoPage:function(t){this.setContent(this.dataCache[t-1].zoom),this.currentPn=~~t}},{superClass:i,type:"PPT"});o.exports.PPT=m});
;define("wkview:widget/ui/html_view/preloadImg.js",function(o,r,n){var e=function(o){if(!o.src)return!1;var r=new Image,n=function(n){return function(){r.onload=r.onerror=r.onabout=null,n(r,o)}};return o.loading&&o.loading(o),o.onload&&(r.onload=n(o.onload)),o.onerror&&(r.onerror=r.onabout=n(o.onerror)),r.src=r.originalSrc=o.src,r};n.exports.preloadImg=e});
;define("wkview:widget/ui/html_view/widget.js",function(t,e){var n=t("wkcommon:widget/ui/lib/object/object.js"),i=t("wkcommon:widget/ui/lib/lang/lang.js"),s=t("wkcommon:widget/ui/lib/array/array.js"),o=t("wkcommon:widget/ui/js_core/util/util.js"),r=function(){},a=o.mix,l=function(t,e){e=a(e||{},{prefix:"widget",type:"",superClass:i.Class});var n=e.superClass,o=n.prototype;t=a(t||{},{el:o.el||"",elements:o.elements||{},events:o.events||{},Options:o.Options||{}});var u=function(n){var o=this,r=arguments;n=n||{},o.$el=null,o.$elements={},o.options=a(t.Options,n,!0),o.type=e.type,o.prefix=e.prefix,o._created=!1,o._disabledStatus=!1,o.on("onload",function(){o._created=!0,o._disabledStatus=!0,(!o.$el||o.$el.length<1)&&(o.$el=$(o.options.el)),o.$el.data(o.prefix,this);var t=o.$el.data(o.prefix+"-options");o.options=a(o.options,t,!0),o.refreshElements(),o._bindEvents(o.events)}),i.isFunction(o._init)&&o._init.apply(o,r),u.$$plugins&&s.each(u.$$plugins,function(t){t.apply(o,r)}),o.$el=$(o.options.el),i.isFunction(o._render)&&(o._render(),o._initEvents()),setTimeout(function(){o.fire("onload")},16)};i.inherits(u,n);var p=i.isFunction(t._init)?t._init:r,d=n===i.Class?i.Class:o._init;return t._init=function(){var t=arguments,e=this;i.isFunction(d)&&d.apply(e,t),i.isFunction(p)&&p.apply(e,t)},u.extend(a(t,l._method)),u};l._method={_bindEvents:function(t){var e=this;return t=t||e.events,i.isObject(t)?void n.each(t,function(t,n){var i,s,o,r=n.split(/\s+/);if(!(t in e))throw new Error("\u7f3a\u5c11"+t+"\u4e8b\u4ef6\u51fd\u6570");switch(r.length){case 3:i=e.$elements[r[0]],s=r[1],o=r[2];break;case 2:r[0].match(/^\$/)?(i=e.$elements[r[0]],s=r[1]):(i=e.$el,s=r[0],o=r[1]);break;case 1:i=e.$el,s=r[0]}o?e.bindEvent(i,s,o,t):e.bindEvent(i,s,t)}):!1},bindEvent:function(t,e,n,o){var r=this,a=arguments,l=r.type;return 3===a.length&&(o=n,n=null),i.isString(o)&&(o=r[o]),o=$.proxy(o,r),e=e.split(","),e=s.map(e,function(t){return t+"."+l}),e=e.join(" "),n?$(t).on(e,n,o):$(t).on(e,o),this},unBindEvent:function(t,e,n,o){var r=this,a=arguments,l=r.type;3===a.length&&(o=n,n=null),i.isString(o)&&(o=r[o]),o=$.proxy(o,r),e=e.split(","),e=s.map(e,function(t){return t+"."+l}),e=e.join(" "),n?$(t).off(e,n,o):$(t).off(e,o)},dispose:function(){var t=this,e=t.type;t.$el.off("."+e),t.$el.find("*").off("."+e),t.$el.removeData(t.prefix+"-options"),t.fire("ondispose")&&i.Class.prototype.dispose.call(t)},_setStatus:function(t){return t?(this._disabledStatus=!0,this.$el.addClass(this.type+"-disabled ui-state-disabled")):(this._disabledStatus=!1,this.$el.removeClass(this.type+"-disabled ui-state-disabled")),this},setDisable:function(){return this._setStatus(!0),this.fire("disable"),this},setEnable:function(){return this._setStatus(!1),this.fire("enable"),this},getStatus:function(){return this._disabledStatus},refreshElements:function(t){var e,n,i,s=this,o=t||s.elements,r=[];for(e in o)o.hasOwnProperty(e)&&(n=o[e],i=e.match(/^@([-_\w]+)/),r.push(i&&i.length>1?s.$elements[n]=s.getHookElement(i[1]):s.$elements[n]=$(e,this.$el)));return r},getData:function(t){var e=this,n=e.prefix,i=e.$el.data(n+"-options");return i.hasOwnProperty(t)?i[t]:null},setData:function(t,e){var n=this,i=n.prefix,s=n.$el.data(i+"-options")||{};return s[t]=e,n.$el.data(i+"-options",s),n},getHookElement:function(t){return $("[js-hook="+t+"]",this.$el)}},e.widget=l;var u=function(t,e,n){var i,s=t.$$plugins||(t.$$plugins=[]);s[s.length]=e;for(i in n)n.hasOwnProperty(i)&&(t.prototype[i]=n[i])};e.register=u});